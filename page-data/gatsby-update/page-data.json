{"componentChunkName":"component---src-gatsby-theme-chronoblog-templates-post-js","path":"/gatsby-update","result":{"data":{"mdx":{"id":"65634e3f-5ea4-5c6c-b5c1-9374982116cf","excerpt":"After all these years, Finally a meaningful post. Not a markdown cheat-sheet, not a teaser/update about forgotten half completed projectâ€¦","frontmatter":{"category":"project","author":"Rassilion","title":"Gatsby Update!","date":"2020-11-13T00:00:00.000Z","description":"OMG Finally completed something","tags":["project","gatsby","blog","finished"],"cover":null},"fields":{"slug":"/gatsby-update"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Gatsby Update!\",\n  \"slug\": \"gatsby-update\",\n  \"date\": \"2020-11-13T00:00:00.000Z\",\n  \"tags\": [\"project\", \"gatsby\", \"blog\", \"finished\"],\n  \"category\": \"project\",\n  \"author\": \"Rassilion\",\n  \"description\": \"OMG Finally completed something\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"After all these years, Finally a meaningful post. Not a markdown cheat-sheet, not a teaser/update about forgotten half completed project (although \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"../new-post-teaser\"\n  }), \"\\\"teaser\\\" project\"), \" had three upgrades after that post, I never find time to write about.) With this post again I'm plaining to motivate myself to write regularly, hopefully this time I will be successful. So let's start.\"), mdx(\"h1\", {\n    \"id\": \"why-change-why-gatsby\"\n  }, \"Why Change? Why Gatsby?\"), mdx(\"p\", null, \"Old blog was based off \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://blog.getpelican.com/\"\n  }), \"Pelican Static Site Generator\"), \" (Old Blog source can be found in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Rassilion/Fregram-Blog/tree/source\"\n  }), \"source branch\"), \"). I don't used much but it was rock solid, after 3 years still working and in usable form. Although I'm not sure what can go wrong in a static site but, you'll never know.\"), mdx(\"p\", null, \"So why the change? Mainly to write this post. Also old style was getting really old, I didn't change much but new style look minimal and modern I think? (I'm not good at designing). Another problem was that I haven't dealt with python in a long time, and I'm not motivated to edit 4-5 year old python project. So as a solution decided to move blog something new. For a small project (of course half completed project) I played with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gohugo.io/\"\n  }), \"Hugo\"), \", It was really fast as claimed but Go was not for me. Then I saw \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.com/\"\n  }), \"Gatsby\"), \" a new Hype in the static site scene (like 2 years ago), It had every popular buzz word at the time \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"React\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"performance\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"scalability\"), \". I was ready to join Hype-Train and play with Gatsby but there was no opportunity (AKA to lazy to do hobby projects). But now I'm ready to join. Also at work I'm using Typescript and React so it was easy to join on train (probably the main reason) \"), mdx(\"h1\", {\n    \"id\": \"how\"\n  }, \"How?\"), mdx(\"p\", null, \"I'm not going to write as detailed a tutorial, cause Gatsby has enough documents and tutorials. Only going to explain some tips and tricks I used.\"), mdx(\"h3\", {\n    \"id\": \"themestarter\"\n  }, \"Theme/Starter\"), mdx(\"p\", null, \"I used \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Chronoblog/gatsby-theme-chronoblog\"\n  }), \"Gatsby Starter Chronoblog\"), \" template with minimal edits. With shadowing and override features, It was fairly easy.\"), mdx(\"h3\", {\n    \"id\": \"multiple-authors-sort-of\"\n  }, \"Multiple Authors (sort of)\"), mdx(\"p\", null, \"Old blog was combined effort with my friend, I think there is only 1 post from him but I wanted to preserve it.\"), mdx(\"p\", null, \"first we need to add \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"author\"), \" field to  post frontmatter. So override \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"postQuery\"), \" in post template with creating \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src\\\\gatsby-theme-chronoblog\\\\templates\\\\post.js\"), \" file\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"import { graphql } from 'gatsby';\\n\\nimport Post from 'gatsby-theme-chronoblog/src/components/post';\\n\\nexport default Post;\\n\\nexport const postQuery = graphql`\\n  query($id: String!) {\\n    mdx(id: { eq: $id }) {\\n      id\\n      excerpt\\n      frontmatter {\\n        category\\n        author\\n        title\\n        date\\n        description\\n        tags\\n        cover {\\n          childImageSharp {\\n            fluid(maxWidth: 768, quality: 90) {\\n              ...GatsbyImageSharpFluid_withWebp\\n              presentationWidth\\n              presentationHeight\\n              src\\n            }\\n            resize(width: 768) {\\n              src\\n            }\\n          }\\n        }\\n      }\\n      fields {\\n        slug\\n      }\\n      body\\n    }\\n  }\\n`;\\n\")), mdx(\"p\", null, \"Now we have author metadata but we need to display it in website, For this Chronoblog has a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"post-footer.mdx\"), \".\"), mdx(\"p\", null, \"create post-footer component in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src\\\\gatsby-theme-chronoblog\\\\post-footer.mdx\"), \". Then we can easily access global site configuration and post data from component props. So I added a hack with default Chronoblog components, if post has different author than site author it displays author name from post frontmatter, else it's uses beautiful default \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AuthorBanner\"), \" component from Chronoblog. Of course with this approach guest authors banner pretty dull looking but for now its good enough.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"<div>\\n{props.postData.frontmatter.author && \\nprops.postData.frontmatter.author !== props.siteMetadata.author ? \\n    <AuthorBanner>\\n        <div>\\n            <AuthorBannerHeading>{props.postData.frontmatter.author}</AuthorBannerHeading>\\n        </div>\\n    </AuthorBanner>\\n    :\\n    <AuthorBanner></AuthorBanner>\\n}</div>\\n\")), mdx(\"h3\", {\n    \"id\": \"disqus-comments\"\n  }, \"Disqus comments\"), mdx(\"p\", null, \"I think there better solutions but old blog was using and I'm to lazy to migrate 4 old comments to a new system.\"), mdx(\"p\", null, \"There a plugin \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-plugin-disqus\")), mdx(\"p\", null, \"add disqus to plugins configuration in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-config.js\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"plugins: [\\n    ...,\\n    {\\n      resolve: `gatsby-plugin-disqus`,\\n      options: {\\n        shortname: `yourshortname`\\n      }\\n    }\\n]\\n\")), mdx(\"p\", null, \"then add \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Disqus\"), \" component to post-footer component in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src\\\\gatsby-theme-chronoblog\\\\post-footer.mdx\"), \" to show comments\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"import { Disqus } from 'gatsby-plugin-disqus';\\n\\n<Disqus\\nconfig={{\\nurl: props.siteMetadata.siteUrl + props.postData.fields.slug,\\ntitle: props.postData.frontmatter.title,\\nid: props.postData.id\\n}}\\n/>\\n\")), mdx(\"h3\", {\n    \"id\": \"travis-auto-build-and-deploy-to-github-pages\"\n  }, \"Travis auto build and deploy to github pages\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Automation is god send!\")), mdx(\"p\", null, \"First we need ghpages tool, run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm install gh-pages --save-dev\"), \" in project dir to add it. Then a deploy script for Travis, we can use npm scripts\"), mdx(\"p\", null, \"add this to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"scripts\"), \" in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" (of course update repo url to your repo)\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"    \\\"travis-deploy\\\": \\\"gatsby build --prefix-paths && gh-pages -d public -r https://$GH_TOKEN@{yourgitrepo}\\\",\\n\")), mdx(\"p\", null, \"then create a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"travis.yml\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yml\"\n  }), \"language: node_js\\nbefore_script:\\n  - npm install -g gatsby-cli\\nnode_js:\\n  - \\\"10\\\"\\ndeploy:\\n  provider: script\\n  script: npm i --quiet && npm run travis-deploy\\n  skip_cleanup: true\\n  on:\\n    branch: v2\\n\")), mdx(\"p\", null, \"We are ready to connect our repo to travis. After connecting repo don't forget to add your github auth token \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GH_TOKEN\"), \" in Travis Environment Variables settings. Then we are done, now every time you push a change to repo travis will build and push to gh-pages branch.\"), mdx(\"h3\", {\n    \"id\": \"devto-cross-posting-dream\"\n  }, \"Dev.to cross posting dream\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Yeah I don't post much, but I want those sweet views.\")), mdx(\"p\", null, \"So Dev.to supports RSS import, It should be easy right? No It won't easy. Because of code highlighting or Chronoblog theme; RSS html output is full off inline styles, so Dev.to's html to markdown converter freaks out and displays bunch of empty html tags in markdown. To fix it first I tried to give raw markdown output in RSS but rendering \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mdx\"), \" pain in the butt and also looks like Dev.to only supports html in RSS. So for now I removed \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"style\"), \" tags and css classes from html output, yeah probably it will break RSS readers but who is using them? (a controversial topic maybe?)\"), mdx(\"p\", null, \"of course gatsby has RSS feed plugin\"), mdx(\"p\", null, \"add RSS feed plugin plugins configuration in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-config.js\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"{\\n      resolve: `gatsby-plugin-feed`,\\n      options: {\\n        query: `\\n            {\\n              site {\\n                siteMetadata {\\n                  siteTitle\\n                  siteDescription\\n                  siteUrl\\n                  site_url: siteUrl\\n                  description siteDescription\\n                  title: siteTitle\\n                }\\n              }\\n            }\\n          `,\\n        feeds: [\\n          {\\n            serialize: ({ query: { site, allMdx } }) => {\\n              return allMdx.edges.map((edge) => {\\n                return Object.assign({}, edge.node.frontmatter, {\\n                  description: edge.node.excerpt,\\n                  date: edge.node.frontmatter.date,\\n                  author: edge.node.frontmatter.author,\\n                  title: edge.node.frontmatter.title,\\n                  url: site.siteMetadata.siteUrl + edge.node.fields.slug,\\n                  guid: site.siteMetadata.siteUrl + edge.node.fields.slug,\\n                  custom_elements: [\\n                    {\\n                      'content:encoded': edge.node.html\\n                        .replace(/<style((.|\\\\n|\\\\r)*?)<\\\\/style>/gi, '')\\n                        .replace(/class=\\\"(.*?)\\\"/gi, '')\\n                    },\\n                    {\\n                      tags:\\n                        edge.node.frontmatter.tags &&\\n                        edge.node.frontmatter.tags.join(',')\\n                    },\\n                    {\\n                      category:\\n                        edge.node.frontmatter.tags &&\\n                        edge.node.frontmatter.tags.join(',')\\n                    }\\n                  ]\\n                });\\n              });\\n            },\\n            query: `\\n              {\\n                allMdx(\\n                  limit: 1000,\\n                  sort: { order: DESC, fields: [frontmatter___date] },\\n                  filter: { fields: { type: { eq: \\\"posts\\\" } } }\\n                ) {\\n                    edges {\\n                        node {\\n                            excerpt\\n                            html\\n                          id\\n                          fields {\\n                            slug\\n                            type\\n                          }\\n                          frontmatter {\\n                            author\\n                            title\\n                            date\\n                            link\\n                            draft\\n                            tags\\n                          }\\n                          body\\n                        }\\n                      }\\n                    \\n                }\\n              }\\n              `,\\n            output: '/rss.xml',\\n            title: `Fregram Blog`\\n          }\\n        ]\\n      }\\n    }\\n\")), mdx(\"p\", null, \"Probably half of tags in the RSS is useless but I did not found a good document about it, so left all of them. Main magic happens in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"serialize\"), \" function using regex replace removes style tags and css classes from html, If you have a working configuration you only need to add this change.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"edge.node.html\\n    .replace(/<style((.|\\\\n|\\\\r)*?)<\\\\/style>/gi, '')\\n    .replace(/class=\\\"(.*?)\\\"/gi, '')\\n\")), mdx(\"p\", null, \"also for tags support you need to comma separated list so add these too\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"{\\ntags:\\n    edge.node.frontmatter.tags &&\\n    edge.node.frontmatter.tags.join(',')\\n},\\n{\\ncategory:\\n    edge.node.frontmatter.tags &&\\n    edge.node.frontmatter.tags.join(',')\\n}\\n\")), mdx(\"h1\", {\n    \"id\": \"in-conclusion\"\n  }, \"In Conclusion\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Everything is better and I'm happy\")), mdx(\"p\", null, \"To tell the truth it's not much different from old Pelican setup, maybe more modern. Like with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mdx\"), \" and shadowing gatsby look more easy to customize, but as a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Static Website Generator\"), \" I think they are same. Of course if you are using or interested in React and graphql (although you don't see react much, it's mostly hidden especially using themes) it's good weekend project. \"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"65634e3f-5ea4-5c6c-b5c1-9374982116cf"}},"staticQueryHashes":["1961101537","2542493696"]}